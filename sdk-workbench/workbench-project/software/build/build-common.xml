<project name="caCORE SDK - Common" basedir="." xmlns:ivy="antlib:org.apache.ivy.ant" xmlns="antlib:org.apache.tools.ant" xmlns:cs="antlib:com.puppycrawl.tools.checkstyle">

	<!-- ******************************************************************* -->
	<!-- ** PROPERTIES / PATHS                                            ** -->
	<!-- ******************************************************************* -->

	<!-- Main -->
	<property name="root.dir" location="${basedir}/../.." />
	<property name="docs.dir" location="${root.dir}/docs" />
	<property name="software.dir" location="${root.dir}/software" />
	<property name="build.dir" location="${software.dir}\build" />
	<property name="modules.dir" location="${software.dir}/modules" />
	<property name="tools.dir" location="${build.dir}/tools" />
	<property name="tools.lib.dir" location="${tools.dir}/lib" />
	
	<property name="resource.dir" location="${software.dir}/common/resources" />
	<property name="target.dir" value="${software.dir}/target" />
	<property name="reports.dir" location="${software.dir}/target/reports" />
	<property name="common.dir" value="${software.dir}/common" />
	<property name="bda-download.dir" location="${target.dir}/bda-download" />
	<property name="bda-utils.dir" location="${target.dir}/bda-utils" />
	<property name="bda-lib.dir" location="${target.dir}/lib" />

	<property name="target.module.dir" location="${target.dir}/modules" />
	
	<property name="project.properties.file" value="${build.dir}/project.properties" />
	<property file="${project.properties.file}" />
	<property file="${envpropertyfile}" />

	<ant antfile="${build.dir}/bda-download.xml" target="download-bda" inheritAll="true"/>

	<!-- Ivy -->
	<property name="ivy-cacore.file" value="ivy-cacore-2.0.0-beta2.jar" />
	<property name="ivy.settings.dir" value="${common.dir}"/>
	<property name="ivy.settings.file" value="ivysettings.xml" />
	<property name="local.repo.dir" location="${software.dir}/local-ivy-repo" />
	<property name="shared.local.repo.dir" location="${target.dir}/shared-local-ivy-repo" />
	<property name="ivy.jar" location="${bda-lib.dir}/ivy-2.0.0-beta2.jar" />

	<condition property="taskdef-file" value="build-load-taskdef.xml" else="build-no-taskdef.xml">
		<not>
			<typefound name="xmltask"/>
		</not>
	</condition>

	<import file="${build.dir}/${taskdef-file}"/>
	
	<!-- BDA -->
	<import file="${bda-utils.dir}\bda-build-utils-${bda.version}.xml" />

	<!-- ******************************************************************* -->
	<!-- ** IVY TARGETS AND DEPENDENCY PATHS                              ** -->
	<!-- ******************************************************************* -->

	<target name="ivy:init">
		<property name="ivy.dep.file" value="${ivy.def.file}" />
		<ivy:settings file="${ivy.settings.dir}/${ivy.settings.file}"  />
	</target>

	<target name="clean:dependencies">
	</target>

	<target name="ivy:clean" depends="clean:dependencies" description="Clean">
		<ivy:settings file="${ivy.settings.dir}/${ivy.settings.file}" override="true"/>
		<ivy:cleancache />
	</target>

	<target name="ivy:publish" description="--> publish this project in the ivy repository">
		<tstamp>
			<format property="now" pattern="yyyyMMddHHmmss" />
		</tstamp>
		<property name="version" value="${workbench.version}" />
		<ivy:publish artifactspattern="${target.module.dir}/${module.name}/lib/[artifact].[ext]" resolver="shared-local-repo"  
			pubrevision="${version}" status="release" forcedeliver="true" pubdate="${now}" update="true" overwrite="true"/>
	</target>
</project>
