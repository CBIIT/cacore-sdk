<?xml version="1.0" encoding="utf-8" ?>
<project name="caCORE SDK - Packaging" default="package" basedir="." xmlns:ivy="antlib:org.apache.ivy.ant" xmlns:cs="antlib:com.puppycrawl.tools.checkstyle">
	<description>
		
	</description>

	<property name="dist.dir" value="dist"/>
	<property name="temp.dir" value="${dist.dir}/temp"/>
	<property name="docs.temp.dir" value="${temp.dir}/docs"/>
	<property name="software.dir" value="software"/>
	<property name="build.dir" value="${software.dir}/build"/>
	<property name="modules.dir" value="${software.dir}/modules"/>

	
	<property file="${build.dir}/project.properties"/>

	<target name="init">
		<mkdir dir="${dist.dir}"/>
		<mkdir dir="${temp.dir}"/>
	</target>

	<target name="clean" description="cleans the dist folder">
		<delete dir="${dist.dir}"/>
	</target>

	<target name="package" depends="clean,init,-systemdocs,-package-software">
	</target>

	<!--***********************************************************************
	*** Generates Javadocs for the entire system
	*********************************************************************** -->
	<target name="-systemdocs" description="Generates javadocs for the entire system">
		<javadoc packagenames="*" destdir="${docs.temp.dir}" author="true"
			private="true" version="true" use="true" windowtitle="caCORE SDK ${sdk.version} API Documentation"
			doctitle="caCORE SDK ${sdk.version} API Documentation" useexternalfile="false" verbose="false">
		    <bottom><![CDATA[<i>This System API was generated by the <a href='http://ncicb.nci.nih.gov/NCICB/infrastructure/cacoresdk'>caCORE Software Development Kit</a>.</i>]]></bottom>
			<fileset dir="${modules.dir}" includes="**/*.java"/>
		</javadoc>
		<zip destfile="${dist.dir}/SDK-${sdk.version}-JavaDocs.zip" whenempty="skip">
			<zipfileset dir="${docs.temp.dir}"/>
		</zip>
	</target>

	<target name="-package-software" description="Packages the entire system">
		<zip destfile="${dist.dir}/SDK-${sdk.version}.zip" whenempty="skip">
			<zipfileset dir="${basedir}">
				<exclude name="**/target/**/*.*"/>
				<exclude name="**/modules/**/*.*"/>
				<exclude name="${dist.dir}/**/*"/>
				<exclude name="build.xml"/>
				<exclude name=".project"/>
				<exclude name=".classpath"/>
			</zipfileset>
		</zip>
	</target>

</project>
